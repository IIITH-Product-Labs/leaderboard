<!DOCTYPE html>
<html>
    <head>
    
        <meta charset="utf-8">
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="{{url_for('static',filename='submit.css')}}">
        
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,500,600" rel="stylesheet">
        <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div class="overlap1-l">
            <img class="iiit-new1-1-l" src="{{url_for('static',filename='iiit-new1 1.png')}}" />
            <div class="m1">
                <img class="logouticon" id="imagebutton" src="{{url_for('static',filename='logout icon.png')}}" />
                <div class="m2" id="imagecontent">
                    <a href="{{ url_for('signin') }}" class="dropdown-c1"><span>Sign In</span></a>
                    <a href="{{ url_for('signout') }}" class="dropdown-c1"><span>Sign Out</span></a>
                </div>
            </div>

        </div>
        <div class="scrollmenu-l">
            <a href="{{ url_for('adminabout') }}" class="nav-content">Home</a>
            <a href="{{ url_for('adminobjective') }}" class="nav-content">Objectives</a>
            <a href="{{ url_for('adminconsortium') }}" class="nav-content">Consortium Members</a>
            <a href="{{ url_for('admindocuments') }}" class="nav-content">Documents</a>
            <a target="_self" href="https://himgangycanvas.iiithcanvas.com/" class="nav-content">Applications</a>
            <div class="menu">
                <button class="dropdown-btn1" id="dropdownButton">Leader Board</button>
                <div class="menu-c" id="dropdownMenu">
                    <a href="{{ url_for('download') }}" class="dropdown-content"><span>Download test set</span></a>
                    <a href="{{ url_for('submit') }}" class="dropdown-content"><span>Submit result</span></a>
                    <a href="{{ url_for('register') }}" class="dropdown-content"><span>User registration</span></a>
                </div>
            </div>
            <div class="menu">
                <button class="dropdown-btn2" id="dropdownButton1">For admin</button>
                <div class="menu-c" id="dropdownMenu1">
                    <a href="{{ url_for('approval') }}" class="dropdown-content"><span>Approval</span></a>
                    <a href="{{ url_for('upload') }}" class="dropdown-content"><span>Upload test set</span></a>
                    <a href="{{ url_for('edit') }}" class="dropdown-content"><span>Edit Leader board</span></a>
                </div>
            </div>
        </div>
        <div class="dots">
            <div class="dot1"><img src="{{url_for('static',filename='ls1.png')}}" height="150",width="100"></div>
            <div class="row">
                <a href="{{ url_for('about') }}" class="term1">About us / </a>
                <a href="{{ url_for('userleaderboard') }}" class="term1">&nbsp;Leader board / </a>
                <a href="{{ url_for('usersubmit') }}" class="term2">&nbsp;Submit result</a>
        </div>
            <div class="d">
                <form id="myForm" action="/newform" method="POST" enctype="multipart/form-data">
                    <!--changes-->
                    <div class="one">
                        <div class="one1">1</div> 
                        <div class="one2"><label class="organisation" for="Organization"  >Organisation</label></div>
                        <div class="one3">
                            <div class="input">
                            <select class="input-box4" name="organisation" id="select1" style=" -webkit-appearance: none;">
                                {% for i in items %}
                                <option value="{{i['organisation']}}">{{i['organisation']}}</option>
                                {% endfor %}
                            </select>
                            <div class="drop-icon4"> <img class="drop-img"src="{{url_for('static',filename='drop icon.png')}}"></div>
                        </div>
                        </div>   
                    </div>
                    <div class="two">
                        <div class="two1">2</div> 
                        <div class="two2"><label class="organisation" for="Organization" >Select Task Type</label></div>
                        <div class="two3">
                            <div class="input">                                
                            <select class="select2" name="tasktype" id="select2" >
                                <option value="Translation">Translation</option>
                            </select>
                            <div class="drop-icon"> <img class="drop-img"src="{{url_for('static',filename='drop icon.png')}}"></div>
                           
                        </div>
                        </div>   
                    </div>
                    <div class="three">
                        <div class="three1">3</div> 
                        <div class="three2"><label class="organisation" for="Organization">Source Language</label></div>
                        <div class="three3">
                            <div class="input">
                                <select class="select3" name="slanguage" id="select3">
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="Telugu">Telugu</option>
                                    <option value="Punjabi">Punjabi</option>
                                    <option value="Odia">Odia</option>
                                </select>
                                <div class="drop-icon3"> <img class="drop-img3"src="{{url_for('static',filename='drop icon.png')}}"></div>
                            </div>
                        
                        </div> 
                        <div class="three4">
                            <label class="organisation" for="Organization" TLanguage="">Target Language</label>
                        <div class="three5">
                            <div class="side-input">
                                <select class="select3" name="tlanguage" id="select4" onchange="sendFormData2()">
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="Telugu">Telugu</option>
                                    <option value="Punjabi">Punjabi</option>
                                    <option value="Odia">Odia</option>
                                </select>
                                <div class="drop-icon3"> <img class="drop-img3"src="{{url_for('static',filename='drop icon.png')}}"></div>
                            </div>
                        
                        </div>
                         </div>
                    </div>
                    <div class="four">
                        <div class="four1">4</div> 
                        <div class="four2"><label class="organisation" for="Organization">Test set name</label></div>
                        <div class="four3">
                            <div class="input">
                                <select class="input-box4" name="testsetname" id="select5" style=" -webkit-appearance: none;">
                                    {% for i in data2 %}
                                    <option value="&nbsp;&nbsp;&nbsp;{{i['filename']}}">{{i['filename']}}</option>
                                    {% endfor %}
                                    
                                </select>
                                <div class="drop-icon4"> <img class="drop-img4"src="{{url_for('static',filename='drop icon.png')}}"></div> 
                        </div>
                        
                        </div>   
                    </div>
                    <div class="five">
                        <div class="five1">5</div> 
                        <div class="five2"><label class="organisation" for="Organization">Model name</label></div>
                        <div class="five3">
                            <div class="input">
                                <input class="input-box" type="text" name="module">
                            </div>
                        </div>   
                    </div>
                    <div class="six">
                        <div class="six1">6</div> 
                        <div class="six2"><label class="organisation" for="Organization">Version</label></div>
                        <div class="six3"> 
                            <div class="input">
                                <input class="input-box" type="text" name="version">
                            </div>
                           
                        </div>   
                    </div>
                    <div class='file file--upload button' id="upload" onclick="hideButton()">
                        <label for='input-file'>Upload File</label>
                        <input 
                            id='input-file'
                            type="file" 
                            name="file"
                            onchange="sendFormData()"
                            multiple    
                        >
                    </div>
                    <div id="success-message">
                        <div class="filemessage"><img class="fileimage" src="{{url_for('static',filename='fileimage.png')}}" /><span>&nbsp;File upload successful</span></div>
                    </div>
                
                
                    <div class="eight">
                        <button class="popupbutton"  id="mybutton2"><a href="#popup1">Get Scores</a></button>   
                    </div>

                    <div id="popup1" class="overlay">
                        <div class="popup" id="popup">
                            <a class="close" href="#">&times;</a>
                            <div class="content" id="content">
                                <table class="table" id="table">
                                    <tr >
                                        <th class="heading">Bleu</th>
                                        <th class="heading">Chrf</th>
                                        <th class="heading">Ter</th>
                                    </tr>
                                    <tr id="tablerow">
                                        <td class="data" id="tableid"><input type="text" name="bleu" value="{{data}}" size="4" class="score"></td>
                                        <td class="data" id="tableid1"><input type="text" name="chrf" value="{{data}}" size="4" class="score"</td>
                                        <td class="data" id="tableid2"><input type="text" name="gleu" value="{{data}}" size="4" class="score"</td>
                                    </tr>
                                </table>
                                <div class="side">
                                    <button class="button2" type="submit" value="Submit" >Decline</button>&nbsp;
                                    <button class="button3" type="submit" value="Submit" onclick="submitForm('/publish')">Publish to leaderboard</button>
                                </div>

                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="dot2"><img src="{{url_for('static',filename='lpc1.png')}}" height="90",width="70"></div>
        </div>
        <script>
            function sendFormData() {
            // Get the form data
                var form = document.getElementById('myForm');
                console.log("went")
                var formData = new FormData(form);
                console.log(formData)
                
                // Send the form data to the server using an AJAX request
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/newform', true);
                xhr.send(formData);
                
                console.log("sended")
                document.getElementById("input-file").style.display = "none";
                document.getElementById('mybutton2').style.backgroundColor = '#1F669F';
                            document.getElementById("success-message").style.display = "block";
                            document.getElementById('mybutton2').style.color = 'red';
                xhr.addEventListener('load', function() {
                        const response = JSON.parse(xhr.response);
                        console.log(response)
                        console.log(response[0])
                        console.log(response[1])
                        document.getElementById('tableid').innerHTML = response[0];
                        document.getElementById('tableid1').innerHTML = response[1];
                        document.getElementById('tableid2').innerHTML = response[2];
            })
            }
            function sendFormData2() {
            // Get the form data
                var form = document.getElementById('myForm');
                console.log("went")
                var formData = new FormData(form);
                console.log(formData)
                

                // Send the form data to the server using an AJAX request
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/langform', true);
                xhr.send(formData);
                
                console.log("sended")
                xhr.addEventListener('load', function() {
                        const response = JSON.parse(xhr.response);
                        console.log("came")
                        console.log(response)
                        let selectElement = document.getElementById('select5');
                        selectElement.innerHTML = '';

                        for (let i = 0; i < response.length; i++) {
                        let option = document.createElement('option');
                        option.value = response[i];
                        option.text = response[i];
                        selectElement.add(option);
                        console.log("done")
                        }

            })
            }
            function submitForm(route) {
                // Update the form action
                document.getElementById("myForm").action = route;

                // Submit the form
                document.getElementById("myForm").submit();
            }

        
            var imagebutton = document.getElementById('imagebutton');
            var imagecontent = document.getElementById('imagecontent');
            imagebutton.addEventListener('click', function() {
                imagebutton.classList.toggle('open');
            });
    
            
            var dropdownButton = document.getElementById('dropdownButton');
            var dropdownMenu = document.getElementById('dropdownMenu');

            dropdownButton.addEventListener('click', function() {
                dropdownButton.classList.toggle('open');
            });

            var dropdownButton1 = document.getElementById('dropdownButton1');
            var dropdownMenu1 = document.getElementById('dropdownMenu1');

            dropdownButton1.addEventListener('click', function() {
                dropdownButton1.classList.toggle('open');
            });

        </script>
   
    </body>
</html>